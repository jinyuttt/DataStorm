/**    
 * 文件名：LogFrame.java    
 *    
 * 版本信息：    
 * 日期：2017年6月21日    
 * Copyright 足下 Corporation 2017     
 * 版权所有    
 *    
 */
package DataServer;

import com.google.common.eventbus.AllowConcurrentEvents;
import com.google.common.eventbus.Subscribe;

import StromModel.LogMsg;

/**    
 *     
 * 项目名称：StormCenter    
 * 类名称：LogFrame    
 * 类描述：    
 * 创建人：jinyu    
 * 创建时间：2017年6月21日 下午10:11:59    
 * 修改人：jinyu    
 * 修改时间：2017年6月21日 下午10:11:59    
 * 修改备注：    
 * @version     
 *     
 */
public class LogFrame {
    FrmStrom frmui=null;
    public  LogFrame(FrmStrom frm)
    {
        frmui=frm;
    }
    @Subscribe
    @AllowConcurrentEvents
   public void logShow(LogMsg msg)
   {

       //处理日志信息
        frmui.logTXTShow(msg);
        if(msg.level!=0)
        {
            frmui.logtable(msg);
        }
           
   }
    @Subscribe
    @AllowConcurrentEvents
   public void logMsgShow(String msg)
   {
        //功能信息（特定)
        if(msg!=null)
        {
            String[] all=msg.split("#");
            if(msg.startsWith("master"))
            {
               boolean isAction=false;
                if(all[3].equals("action"))
                {
                    isAction=true;
                }
              frmui.logCenter(all[1], all[2], all[0], isAction);
            }   
            else if(msg.startsWith("当前节点"))
            {
             frmui.logCureentNode(all[1], all[2], all[0]);
            }
            else
            {
                frmui.logServer(all[0], all[1], all[2], all[4], Boolean.valueOf(all[3]), Boolean.valueOf(all[5]));
                
            }
        }
        //
        LogMsg info=new LogMsg();
        info.msg=msg;
        frmui.logtable(info);
   }
}
